<!DOCTYPE HTML>
<html>
	<head>
		<title>Dataset</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link rel="stylesheet"
			  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</head>

	<style>

		.note {
			background-color: #f8f9fa;
			border-left: 4px solid #3498db;
			padding: 15px;
			margin: 20px 0;
		}

	</style>

	<body>

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
				<header id="header">
					<h1>TWR-CLOUD-Bern</h1>
					<nav id="naiv">
						<ul>
							<li class="special">
								<a href="#menu" class="menuToggle"><span>Menu</span></a>
								<div id="menu">
									<ul>
										<li><a href="index.html"><img src="images/home.png" alt="Home TWR-CLOUD-Bern" style="width:15px; vertical-align:middle; margin-right:5px;"> Home</a></li>
										<li><a class="icon fa-lightbulb" href="methodology.html">Methodology</a></li>
										<li><a class="icon fa-list-alt" href="dataset.html">Dataset</a></li>
										<li><a class="icon fa-chart-bar" href="evaluation_framework.html">Evaluation Framework</a></li>
									</ul>
								</div>
							</li>
						</ul>
					</nav>
				</header>

				<!-- Main -->
					<article id="main">
						<section class="wrapper style5">
							<div class="inner">

								<h2>Dataset</h2>

								<p class="jtext">
									Full presentation of the dataset structure, including statistical tables, with
									instructions on accessing and interpreting the data.
								</p>

								<div class="col-12"><span class="image fit"><img src="images/dataset.jpg" alt="" /></span></div>

								<hr />

								<h3>Overview</h3>

								<p>The dataset has been divided into four main components:</p>

								<ol>
									<li>Ranging Measurements at Responder Sides (<code>Rangings at Responders.pkl</code>)</li>
									<li>Ranging Measurements at Poller Sides (<code>Rangings at Pollers.pkl</code>)</li>
									<li>Responder Statistics (<code>Rangings at Responders (Stats).pkl</code>)</li>
									<li>Poller Statistics (<code>Rangings at Pollers (Stats).pkl</code>)</li>
								</ol>

								<p class="jtext">
									The <code>Rangings at Responders.pkl</code> and <code>Rangings at Pollers.pkl</code>
									datasets contain Time-of-Flight measurements based on the implemented 4-message TWR
									protocol (see <code>Ranging Protocol</code> section in
									<a href="methodology.html">Methodology</a>), captured from both responder
									and poller perspectives. The responder dataset contains measurements calculated at
									the responders' sides after the third message is received, while the poller dataset
									only includes measurements where this enhanced estimate was successfully delivered
									back to the poller via the fourth message. As a result,
									<code>Rangings at Pollers.pkl</code> is effectively a subset of
									<code>Rangings at Responders.pkl</code>, excluding cases where the fourth message
									failed to reach the poller due to collisions or other transmission issues. This
									difference in measurement counts not only provides insight into the reliability
									of message delivery, but also enables simulations requiring end-to-end enhanced
									ranging.
								</p>

								<h2>Ranging Measurement Tables</h2>

								<p>The dataset contains ranging measurements from both responder and poller perspectives
									due to the implemented 4-message TWR protocol. While traditional TWR uses 2-3
									messages, our implementation adds a fourth message to share enhanced estimates
									between nodes, supporting cooperative localization applications.</p>

								<h3>Table Structure and Contents</h3>

								<h4>Responder Measurements (<code>Rangings at Responders.pkl</code>)</h4>
								<p>Contains measurements recorded by nodes when acting as responders in the TWR protocol.</p>

								<table class="compact-table">
									<tr>
										<th>Column</th>
										<th>Type</th>
										<th>Unit</th>
										<th>Description</th>
									</tr>
									<tr>
										<td>Scan_ID</td>
										<td>int</td>
										<td>-</td>
										<td>Identifier for the measurement scan (1-12, where 12 is evaluation scan)</td>
									</tr>
									<tr>
										<td>Timestamp</td>
										<td>int</td>
										<td>nanoseconds</td>
										<td>Unix timestamp of the measurement</td>
									</tr>
									<tr>
										<td>Listening_Period</td>
										<td>int</td>
										<td>milliseconds</td>
										<td>The period during which the node listens for messages</td>
									</tr>
									<tr>
										<td>Responder_ID</td>
										<td>int</td>
										<td>-</td>
										<td>ID of the node acting as responder (1-40)</td>
									</tr>
									<tr>
										<td>Responder_Pos_ID</td>
										<td>int</td>
										<td>-</td>
										<td>Position ID where responder was placed (1-170)</td>
									</tr>
									<tr>
										<td>Responder_X/Y/Z</td>
										<td>float</td>
										<td>meters</td>
										<td>Coordinates of responder position</td>
									</tr>
									<tr>
										<td>Poller_ID</td>
										<td>int</td>
										<td>-</td>
										<td>ID of the node acting as poller (1-40)</td>
									</tr>
									<tr>
										<td>Poller_Pos_ID</td>
										<td>int</td>
										<td>-</td>
										<td>Position ID where poller was placed (1-170)</td>
									</tr>
									<tr>
										<td>Poller_X/Y/Z</td>
										<td>float</td>
										<td>meters</td>
										<td>Coordinates of poller position</td>
									</tr>
									<tr>
										<td>Node_Distance_3D</td>
										<td>float</td>
										<td>centimeters</td>
										<td>True 3D Euclidean distance between nodes</td>
									</tr>
									<tr>
										<td>ToF</td>
										<td>float</td>
										<td>nanoseconds</td>
										<td>Measured Time of Flight</td>
									</tr>
									<tr>
										<td>Class</td>
										<td>string</td>
										<td>-</td>
										<td>"Train" or "Eval" indicating dataset split</td>
									</tr>
								</table>

								<h4>Poller Measurements (<code>Rangings at Pollers.pkl</code>)</h4>
								<p>Contains measurements recorded by nodes when acting as pollers in the TWR protocol. Has identical structure to the responder measurements but from the poller's perspective.</p>

								<h3>Relationship Between Tables</h3>
								<div class="note">
									<ul>
										<li>The responder measurements table contains more entries (~2.1M) than the poller measurements table (~1.8M)</li>
										<li>This difference occurs because the responder can calculate its measurement after the 3rd message, while the poller needs the 4th message to receive the enhanced estimate</li>
										<li>Failed 4th message transmissions result in measurements present in the responder table but missing from the poller table</li>
										<li>Matching measurements can be found across tables by comparing timestamps and node IDs (with roles reversed)</li>
									</ul>
								</div>

								<h2>Statistics Tables</h2>

								<h3>Responder Statistics (<code>Rangings at Responders (Stats).pkl</code>)</h3>
								<p>Tracks the success rate of responder operations at one-second granularity.</p>

								<table class="compact-table">
									<tr>
										<th>Column</th>
										<th>Description</th>
									</tr>
									<tr>
										<td>Timestamp</td>
										<td>Unix timestamp in nanoseconds</td>
									</tr>
									<tr>
										<td>Response Period</td>
										<td>Period in milliseconds</td>
									</tr>
									<tr>
										<td>Report Iter</td>
										<td>Iteration number</td>
									</tr>
									<tr>
										<td>Successful Responds</td>
										<td>Count of successful responses</td>
									</tr>
									<tr>
										<td>Responding Attempts</td>
										<td>Total response attempts</td>
									</tr>
									<tr>
										<td>No Valid TX1</td>
										<td>Count of invalid first transmissions</td>
									</tr>
									<tr>
										<td>TX2 Failed</td>
										<td>Count of failed second transmissions</td>
									</tr>
									<tr>
										<td>No Valid TX3</td>
										<td>Count of invalid third transmissions</td>
									</tr>
									<tr>
										<td>TX4 Failed</td>
										<td>Count of failed fourth transmissions</td>
									</tr>
								</table>

								<h3>Poller Statistics (<code>Rangings at Pollers (Stats).pkl</code>)</h3>
								<p>Tracks the success rate of polling operations at one-second granularity.</p>

								<table class="compact-table">
									<tr>
										<th>Column</th>
										<th>Description</th>
									</tr>
									<tr>
										<td>Timestamp</td>
										<td>Unix timestamp in nanoseconds</td>
									</tr>
									<tr>
										<td>Response Period</td>
										<td>Period in milliseconds</td>
									</tr>
									<tr>
										<td>Report Iter</td>
										<td>Iteration number</td>
									</tr>
									<tr>
										<td>Successful Polls</td>
										<td>Count of successful polls</td>
									</tr>
									<tr>
										<td>Polling Attempts</td>
										<td>Total polling attempts</td>
									</tr>
									<tr>
										<td>TX1 Failed</td>
										<td>Count of failed first transmissions</td>
									</tr>
									<tr>
										<td>No Valid TX2</td>
										<td>Count of invalid second transmissions</td>
									</tr>
									<tr>
										<td>TX3 Failed</td>
										<td>Count of failed third transmissions</td>
									</tr>
									<tr>
										<td>No Valid TX4</td>
										<td>Count of invalid fourth transmissions</td>
									</tr>
								</table>

								<h2>Loading the Dataset</h2>

								<p>The dataset can be loaded in Python using the pickle module:</p>

								<pre><code class="python">import pandas as pd

# Load ranging measurements
responding_measurements_df = pd.read_pickle("Rangings at Responders.pkl")
polling_measurements_df = pd.read_pickle("Rangings at Pollers.pkl")

# Load statistics
responder_stats_df = pd.read_pickle("Rangings at Responders (Stats).pkl")
poller_stats_df = pd.read_pickle("Rangings at Pollers (Stats).pkl")

# Display first few rows of ranging measurements
print(responding_measurements_df.head())</code></pre>

								<h3>Data Filtering Example</h3>
								<p>To filter measurements from the evaluation scan (Scan_ID 12):</p>
								<pre><code class="python">eval_measurements = responding_measurements_df[responding_measurements_df['Scan_ID'] == 12]</code></pre>

								<h3>Notes</h3>
								<div class="note">
									<ul>
										<li>All position coordinates are provided in meters relative to a local coordinate system</li>
										<li>Time of Flight (ToF) measurements are in nanoseconds</li>
										<li>Node_Distance_3D is pre-calculated in centimeters for convenience</li>
										<li>The dataset includes both training (Scan_ID 1-11) and evaluation (Scan_ID 12) measurements</li>
										<li>Statistics tables provide insights into protocol reliability and network performance</li>
									</ul>
								</div>
							</div>
						</section>
					</article>

				<!-- CTA -->
				<section class="wrapper style4">
					<div class="inner" style="display: flex; align-items: center;">
						<div class="text-content" style="flex: 1; text-align: right; padding-right: 20px;">
							<header>
								<h2>Contact</h2>
								<p>firstname.lastname@unibe.ch</p>
								<a href="content/twrcloudbern2024.bib" download="twrcloudbern2024.bib">BibTeX entry</a>
							</header>
						</div>
						<div class="image-container" style="flex: 1; display: flex; justify-content: flex-start; gap: 20px;">
							<div style="text-align: center;">
								<img src="images/authors/Xenakis.png" alt="Dimitrios Xenakis" style="width: auto; height: 200px;">
							</div>
							<div style="text-align: center;">
								<img src="images/authors/DiMaio.png" alt="Antonio Di Maio" style="width: auto; height: 200px;">
							</div>
							<div style="text-align: center;">
								<img src="images/authors/Braun.png" alt="Torsten Braun" style="width: auto; height: 200px;">
							</div>
						</div>
					</div>
				</section>
			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>